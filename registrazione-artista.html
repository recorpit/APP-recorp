<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestione Artisti - RECORP ALL-IN-ONE</title>
  <link rel="stylesheet" href="./assets/style.css">
</head>
<body>
  <nav class="navbar">
    <div class="navbar-content">
      <a href="./index.html" class="logo">
        <img src="./assets/logo.png" alt="RECORP Logo">
        <span class="logo-text">RECORP ALL-IN-ONE</span>
      </a>
      <div class="nav-links">
        <a href="./index.html">Dashboard</a>
        <a href="./registrazione-artista.html" class="active">Artisti</a>
        <a href="./agibilita/index.html">Agibilità</a>
      </div>
    </div>
  </nav>

  <div class="main-container">
    <div class="container">
      <div class="header">
        <h1 id="pageTitle">Gestione Artisti</h1>
        <p id="pageSubtitle">Scegli un'azione da eseguire</p>
      </div>
      <div id="loadingIndicator" class="alert alert-info" style="display:none;"></div>
      <div id="successMessage" class="alert alert-success" style="display:none;"></div>
      <div id="errorMessage" class="alert alert-danger" style="display:none;"></div>

      <!-- Scelta modalità -->
      <div id="modeSelection" class="mode-selection">
        <button class="btn btn-primary" onclick="selectMode('new')">+ Nuovo Artista</button>
        <button class="btn btn-secondary" onclick="selectMode('edit')">✏️ Modifica Artista</button>
      </div>

      <!-- Selezione artista per modifica -->
      <div id="artistSelection" style="display:none;">
        <div class="form-group">
          <input type="text" class="form-control" id="searchArtistInput" placeholder="Cerca per nome, cognome, CF o nome d'arte...">
        </div>
        <div id="artistsListContainer" class="artists-list-container"></div>
        <button class="btn btn-secondary" onclick="goBackToModeSelection()">⬅️ Indietro</button>
      </div>

      <!-- Form registrazione/modifica artista -->
      <div id="registrationForm" style="display:none;">
        <form id="registrationForm" autocomplete="off">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Codice Fiscale <span class="required">*</span></label>
              <input type="text" class="form-control uppercase-field" id="codiceFiscale" name="codiceFiscale" maxlength="16" required>
            </div>
            <div class="form-group">
              <label class="form-label">Nome <span class="required">*</span></label>
              <input type="text" class="form-control" id="nome" name="nome" required>
            </div>
            <div class="form-group">
              <label class="form-label">Cognome <span class="required">*</span></label>
              <input type="text" class="form-control" id="cognome" name="cognome" required>
            </div>
            <div class="form-group">
              <label class="form-label">Nome d'Arte</label>
              <input type="text" class="form-control" id="nomeArte" name="nomeArte">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Data di nascita <span class="required">*</span></label>
              <input type="date" class="form-control" id="dataNascita" name="dataNascita" required>
            </div>
            <div class="form-group">
              <label class="form-label">Sesso</label>
              <select class="form-control" id="sesso" name="sesso">
                <option value="">-</option>
                <option value="M">Maschio</option>
                <option value="F">Femmina</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Luogo di nascita</label>
              <input type="text" class="form-control" id="luogoNascita" name="luogoNascita">
            </div>
            <div class="form-group">
              <label class="form-label">Provincia di nascita</label>
              <input type="text" class="form-control uppercase-field" id="provinciaNascita" name="provinciaNascita" maxlength="2">
            </div>
            <div class="form-group">
              <label class="form-label">Matricola ENPALS</label>
              <input type="text" class="form-control uppercase-field" id="matricolaENPALS" name="matricolaENPALS">
            </div>
            <div class="form-group">
              <label class="form-label">Nazionalità</label>
              <input type="text" class="form-control" id="nazionalita" name="nazionalita" value="IT">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Telefono</label>
              <input type="text" class="form-control" id="telefono" name="telefono">
            </div>
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="email" name="email">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Indirizzo</label>
              <input type="text" class="form-control" id="indirizzo" name="indirizzo">
            </div>
            <div class="form-group">
              <label class="form-label">Provincia</label>
              <select class="form-control" id="provincia" name="provincia"></select>
            </div>
            <div class="form-group">
              <label class="form-label">Città</label>
              <select class="form-control" id="citta" name="citta" disabled>
                <option value="">Prima seleziona la provincia</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">CAP</label>
              <select class="form-control" id="cap" name="cap" disabled>
                <option value="">Prima seleziona la città</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Mansione <span class="required">*</span></label>
              <input type="text" class="form-control" id="mansione" name="mansione" required>
            </div>
            <div class="form-group">
              <label class="form-label">Partita IVA?</label>
              <select class="form-control" id="hasPartitaIva" name="hasPartitaIva">
                <option value="">-</option>
                <option value="si">Sì</option>
                <option value="no">No</option>
              </select>
            </div>
            <div class="form-group" id="partitaIvaGroup" style="display:none;">
              <label class="form-label">Partita IVA <span class="required">*</span></label>
              <input type="text" class="form-control" id="partitaIva" name="partitaIva">
            </div>
            <div class="form-group" id="tipoRapportoGroup" style="display:none;">
              <label class="form-label">Tipologia Contratto <span class="required">*</span></label>
              <select class="form-control" id="tipoRapporto" name="tipoRapporto">
                <option value="">-</option>
                <option value="occasionale">Occasionale</option>
                <option value="chiamata">A chiamata</option>
                <option value="fulltime">Full Time</option>
              </select>
            </div>
            <div class="form-group" id="codiceComunicazioneGroup" style="display:none;">
              <label class="form-label">Codice Comunicazione INPS</label>
              <input type="text" class="form-control" id="codiceComunicazione" name="codiceComunicazione">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">IBAN</label>
              <input type="text" class="form-control" id="iban" name="iban">
            </div>
            <div class="form-group">
              <label class="form-label">Note</label>
              <textarea class="form-control" id="note" name="note" rows="2"></textarea>
            </div>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary"><span id="submitText">Registra Artista</span></button>
            <button type="button" class="btn btn-secondary" onclick="cancelRegistration()">Annulla</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <script src="./comuni-loader.js"></script>
  <script type="module" src="registrazione-artista.js"></script>
</body>
</html>
